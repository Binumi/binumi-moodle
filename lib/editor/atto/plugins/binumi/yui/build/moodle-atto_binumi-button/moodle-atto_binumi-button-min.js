YUI.add("moodle-atto_binumi-button",function(e,t){e.namespace("M.atto_binumi").Button=e.Base.create("button",e.M.editor_atto.EditorPlugin,[],{_chooser:null,initializer:function(){if(this.get("disabled"))return;this.addButton({icon:"icon",iconComponent:"atto_binumi",callback:this._initChooser});var e=this;window.addEventListener("message",function(t){e._dialogue.hide(),t.data.hasOwnProperty("embed")&&t.data.hasOwnProperty("thumbnail")&&e._insertContent(t.data.embed,t.data.thumbnail)})},_initChooser:function(){var t=this.getDialogue({headerContent:"Binumi Chooser",width:"800px",focusAfterHide:!0}),n=e.Node.create("<iframe></iframe>");n.setStyles({height:"700px",border:"none",width:"100%"}),n.setAttribute("src",this.get("url")),t.set("bodyContent",n).show(),this.markUpdated()},_insertContent:function(e,t){var n='<a class="binumi-embed" href="'+e+'" target="_blank"><img src="'+t+'" alt="Binumi Embed"  /></a>';this.editor.focus(),this.get("host").insertContentAtFocusPoint(n),this.markUpdated()}},{ATTRS:{disabled:{value:!1},chooser_js_url:{value:null},url:{value:null},mode:{value:"popup"}}})},"@VERSION@",{requires:["moodle-editor_atto-plugin"]});
